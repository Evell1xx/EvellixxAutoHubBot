import os
import requests

# Получаем команду из переменной окружения
command = os.environ.get("BOT_COMMAND", "").lower()
token = os.environ["TELEGRAM_BOT_TOKEN"].strip()
chat_id = os.environ["TELEGRAM_CHAT_ID"].strip()

if command == "version":
    text = """На данный момент актуальная версия VoyahOS для Рест/318 - 6.11.1, вот её описание:

VOYAH OS 6.11.1 — реконструированный подробный changelog + технические пояснения

1. Оптимизация стабилизации работы 360° камеры
Исправлено:
 • рывки при повороте камеры в 3D-режиме;
 • повышена чёткость в тёмное время;
 • уменьшена задержка включения камеры;
 • исправлены редкие артефакты на боковых изображениях.
Что это даёт:
Камера включается стабильнее, изображение более плавное и точное, парковаться проще.

2. Улучшена стабильность панели приборов и центрального экрана
Исправлено:
 • иногда пропадающие данные: скорость, ассисты;
 • зависание при резком переключении экранов;
 • случайные мерцания при включении камеры;
 • ускорен вывод элементов интерфейса.
Что это даёт:
Приборка меньше лагает, интерфейс становится более живым и “лёгким”.

3. Оптимизация беспроводных соединений (Bluetooth / Wi-Fi)
Исправлено:
 • стабильность CarPlay/Android Auto;
 • уменьшены обрывы Bluetooth;
 • повышение стабильности при звонках через BT;
 • улучшен поиск и подключение устройств.
Что это даёт:
Телефон «не отваливается», качество связи выше, меньше лагов при музыке.

4. Улучшена работа умного ключа и функции бесключевого доступа
Исправлено:
 • улучшен приём сигнала ключа;
 • уменьшены ложные срабатывания;
 • ускорено автозапирание при уходе.
Что это даёт:
Автомобиль стал предсказуемее и быстрее реагирует на владельца.

5. Улучшена логика климат-контроля
Исправлено:
 • резкие скачки мощности обдува;
 • слишком частые изменения температуры;
 • замедленная реакция при обогреве ног или стекла;
 • улучшена логика в автоматическом режиме.
Что это даёт:
Климат работает мягче, воздух распределяется комфортнее.

6. Оптимизация “Сторожевого режима” (Sentry Mode)
Исправлено:
 • повышена стабильность записи;
 • исправлены ложные срабатывания;
 • ускорено сохранение данных;
 • улучшена логика уведомлений в приложении.
Что это даёт:
Система охраны стала надёжнее, нет “пустых” записей.

7. Повышена стабильность CAN-коммуникаций между блоками автомобиля
Исправлено:
 • потеря пакетов между модулями;
 • задержки в обновлении параметров;
 • ошибки в диагностике;
 • улучшена синхронизация ADAS, приборки и блока управления ЭПБ.
Что это даёт:
Машина работает ровнее, меньше “глюков”, улучшаются реакции ассистентов.

8. Снижение энергопотребления в покое
Исправлено:
 • оптимизирован сон электронных модулей;
 • снижено паразитное питание камеры и модема;
 • уменьшено ночные фоновое пробуждения.
Что это даёт:
Меньше расход заряда при длительной парковке.

9. Общая оптимизация производительности системы
Исправлено:
 • ускорение загрузки интерфейса;
 • уменьшение потребления оперативной памяти;
 • фиксы редких зависаний;
 • оптимизация работы встроенных приложений.
Что это даёт:
Система стала быстрее, отзывчивее и стабильнее.

ИТОГ: что реально представляет собой обновление 6.11.1
• улучшенная камера
• стабильный тройной экран
• надёжный Bluetooth
• исправленный цифровой ключ
• улучшенный климат
• доработанный сторожевой режим
• сниженное энергопотребление
• лучшая работа CAN
• более плавная и быстрая система
"""
else:
    text = f"Команда {command} не найдена"

url = f"https://api.telegram.org/bot{token}/sendMessage"
resp = requests.post(url, data={"chat_id": chat_id, "text": text, "parse_mode": "HTML"})
print("Status:", resp.status_code)
print("Response:", resp.text)
